<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200;300;400;500;600;700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">
    <script src="https://kit.fontawesome.com/7d878f059c.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    {{ moment.include_moment() }}
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Pollution Reports</title>
    <script src="{{ url_for('static', filename='scripts/node_modules/rellax/rellax.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/node_modules/ab-datepicker/js/datepicker.min.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='scripts/node_modules/ab-datepicker/css/datepicker.css') }}" type="text/css">

    {% if places_api_key %}
        <script
            async="false"
            src="https://maps.googleapis.com/maps/api/js?key={{ places_api_key }}&callback=initPolluterSearch&libraries=places&v=weekly"
            >
        </script>
        <script async="false" src="{{ url_for('static', filename='scripts/autocomplete.js') }}"></script>
    {% endif %}

</head>
{% if places_api_key %}
<body onload="initPolluterSearch(); initMap();" class="bg-color-black">
{% else %}
<body class="bg-color-black">
{% endif %}

<header class="container-fluid bg-color-black font-size-medium header-font py-2 sticky-top">
            <div class="row p-0">
                <div class="col-md px-5 text-center text-md-left text-uppercase text-white font-size-large">Pollution Reports</div>
                <div class="col-md px-5">
                    <nav>
                        <ul class="nav justify-content-center nav-fill header-font font-size-small">
                            <li class="nav-item"><a class="text-white" href="{{ url_for('site.home') }}">Make a Report</a></li>
                            <li class="nav-item"><a class="text-white" href="{{ url_for('site.about') }}">About</a></li>
                            <li class="nav-item"><a class="text-white" href="{{ url_for('site.privacy') }}">Privacy Policy</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>
    <div class="container-fluid m-0 px-3 background-image">


        <div class="complaint-form-container container-fluid bg-color-white-transparent parallax py-3 px-5" data-rellax-speed="15">
            <div class="row py-0 px-5">
                <div class="col">
                    <h1 class="header-font text-uppercase font-size-large text-center">Make a Report</h1>
                </div>
            </div>
            <form role="form" aria-label="Form for reporting pollution">



                <div class="row py-4">
                    <div class="col-md-6">
                        <h3 class="header-font font-size-medium text-dark">Where was it?</h3>
                        <div class="form-group">

                            <input id="polluter_search" type="search" onFocus="geolocate()" autocomplete="fdsifaoenjeiop" placeholder="Search for polluter..." class="form-control body-font font-size-x-small">
                            <label for="polluter_search" class="sr-only">Search for polluter...</label>
                            <input type="hidden" id="lat" class="form-control ">
                            <input type="hidden" id="lng" class="form-control ">
                            <input type="hidden" id="street_number" class="form-control ">
                            <input type="hidden" id="locality" class="form-control ">
                            <input type="hidden" id="route" class="form-control ">
                            <input type="hidden" id="administrative_area_level_1" class="form-control ">
                            <input type="hidden" id="postal_code" class="form-control ">

                            <figure role="figure">
                                <div id="map" class="img-fluid rounded-sm mt-2"></div>
                                <figcaption class="sr-only">Searchable map showing location of polluter</figcaption>
                            </figure>

                        </div>
                    </div>
                    <div class="col-md-6">
                        <h3 class="header-font font-size-medium text-dark">When did it happen?</h3>
                        <div class="form-group pb-2">
                            <input class="date form-control body-font font-size-x-small" id="date1" type="text" placeholder="m/d/yy" title="click the button to choose a different date"/>

                            <div class="container-fluid mt-2 p-0">
                                <div class="input-group">

                                <select class="form-control body-font font-size-x-small text-dark" id="hours">
                                    {% for i in range(1, 13) %}
                                        <option value="{{ i }}">{{ i }}</option>
                                    {% endfor %}
                                </select>
                                <label for="hours" class="sr-only">Hour</label>

                                <select class="form-control body-font font-size-x-small text-dark" id="minutes">
                                    {% for i in range(60) %}
                                        {% if i < 10 %}
                                            {% set val = "0%.0f"|format(i) %}
                                        {% else %}
                                            {% set val = i|string %}
                                        {% endif %}

                                        <option value={{ i }}>{{ val }}</option>
                                    {% endfor %}
                                </select>
                                <label for="minutes" class="sr-only">Minute</label>

                                <label for="ampm" class="sr-only">AM/PM</label>
                                <select class="form-control body-font font-size-x-small text-dark" id="ampm">
                                    <option value="am">AM</option>
                                    <option value="pm">PM</option>
                                </select>

                            </div>
                            </div>

                            {# Initialize ab-datepicker & prefill w/current date/time#}
                            <script type="text/javascript">
                                $(document).ready(function () {
                                    var currentDate = moment().format('M/D/Y').toString();
                                    $("#date1").val(currentDate);
                                });

                                $(document).ready(function() {
                                    $('.date').datepicker({
                                        weekDayFormat: 'narrow',
                                        markup: 'bootstrap4',
                                        inputFormat: 'M/d/y',
                                        max: moment().format('M/D/Y').toString(),
                                    });
                                });

                                $(document).ready(function () {
                                    var mo = moment();
                                    var hour = mo.format("h");
                                    var minute = mo.format("m");
                                    var ampm = mo.format("a");
                                    $("#hours").val(hour);
                                    $("#minutes").val(minute);
                                    $("#ampm").val(ampm);
                                });

                            </script>

                            <div class="btn-group-toggle mt-2" data-toggle="buttons">
                                <label role="button" id="ongoing-button-label" class="btn btn-block btn-dark btn-sm font-size-small font-white header-font" for="ongoing-complaint">
                                    <input id="ongoing-complaint" type="checkbox" autocomplete="off">
                                    <span id="is-it-ongoing">Still Ongoing</span>
                                </label>
                            </div>

                            {# Allow box to be checked with spacebar #}
                            <script type="text/javascript">
                                var checkbox = $("#ongoing-complaint");
                                checkbox.keypress(function(key) {
                                    if(key.which === 32) {
                                        $(this).trigger("click");
                                    }
                                });
                            </script>
                        </div>
                        <div class="form-group mb-0">
                        <h3 class="header-font font-size-medium text-dark">Describe the pollution</h3>
                            <div class="container-fluid mt-2 p-0">
                                <div class="input-group">
                                    <select class="form-control body-font font-size-x-small text-dark" id="pollution-types">
                                        {% for t in ["Odors/Fumes", "Smoke", "Dust", "Asbestos"] %}
                                            <option value="{{ t }}">{{ t }}</option>
                                        {% endfor %}
                                    </select>
                                    <div class="input-group-append">
                                        <label for="pollution-types" class="input-group-text body-font font-size-x-small text-dark">Type</label>
                                    </div>
                                </div>
                            </div>
                            <div class="container-fluid mt-2 p-0">
                                <label for="pollution-description" class="sr-only">Describe the Pollution, in your own words</label>
                                <textarea class="form-control body-font font-size-x-small text-dark" id="pollution-description" rows="11" placeholder="Describe the pollution, in your own words"></textarea>
                            </div>
                        </div>


                    </div>
                </div>

                <div class="row py-4">
                    <div class="col-md-6">
                        <h3 class="header-font font-size-medium text-dark">Your Contact Info</h3>
                    </div>
                    <div class="col-md-6"></div>
                </div>

            </form>

        </div>

    </div>

    <script type="text/javascript">
        var rellax = new Rellax('.parallax');
    </script>


</body>
</html>